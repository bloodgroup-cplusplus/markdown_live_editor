
    <html>
      <head><meta charset="UTF-8"><title>Markdown Preview</title></head>
      <body><h2><strong>Primary Key vs Foreign Key - The Relationship Builders</strong></h2>
<h3><strong>üéØ Challenge 4: The Student ID Mystery</strong></h3>
<p><strong>Scenario:</strong> You're organizing a school database. How do you ensure:</p>
<ul>
<li>Each student is unique?</li>
<li>You can find any student quickly?</li>
<li>You can link students to their classes?</li>
<li>You can link students to their grades?</li>
</ul>
<p><strong>Think about it:</strong> What system would you use to identify and connect students?</p>
<h3><strong>The Answer: Keys!</strong></h3>
<hr>
<h3><strong>üèÜ Primary Key: The Unique Identifier</strong></h3>
<p><strong>Real-world parallel:</strong> Your Social Security Number, Passport Number, or Student ID</p>
<p><strong>Definition:</strong> A column (or set of columns) that uniquely identifies each row in a table.</p>
<p><strong>Rules for Primary Keys:</strong></p>
<ol>
<li>‚úÖ Must be UNIQUE (no duplicates)</li>
<li>‚úÖ Cannot be NULL (must have a value)</li>
<li>‚úÖ Should never change</li>
<li>‚úÖ One per table</li>
</ol>
<p><strong>Example: STUDENTS table</strong></p>
<pre><code class="language-sql"> CREATE TABLE students (  student_id INT PRIMARY KEY,   first_name VARCHAR(50),  last_name VARCHAR(50),  email VARCHAR(100),  birth_date DATE)

</code></pre>
<p>-- Sample data:</p>
<p><img src="https://res.cloudinary.com/dretwg3dy/image/upload/v1764427380/208_uykzxc.png" alt="img1"></p>
<p><strong>Why is student_id the primary key?</strong></p>
<ul>
<li>üÜî Unique: No two students have same ID</li>
<li>üö´ Not null: Every student must have an ID</li>
<li>üîí Stable: ID never changes even if name or email changes</li>
<li>‚ö° Fast: Database automatically indexes primary keys</li>
</ul>
<p><strong>Bad primary key choices:</strong></p>
<ul>
<li>‚ùå <strong>Name:</strong> Not unique (many &quot;John Smith&quot;s exist)</li>
<li>‚ùå <strong>Email:</strong> Could change when student graduates</li>
<li>‚ùå <strong>Phone number:</strong> Can change</li>
<li>‚ùå <strong>Age:</strong> Definitely changes!</li>
</ul>
<hr>
<h3><strong>üîó Foreign Key: The Relationship Connector</strong></h3>
<p><strong>Real-world parallel:</strong> A reference number on a package pointing to your address</p>
<p><strong>Definition:</strong> A column that references the primary key of another table, creating a relationship.</p>
<p><strong>Example: ENROLLMENTS table</strong></p>
<pre><code class="language-sql"> CREATE TABLE enrollments (
enrollment_id INT PRIMARY KEY,
student_id INT, course_id INT, enrollment_date DATE,  grade VARCHAR(2), FOREIGN KEY (student_id) REFERENCES students(student_id),  FOREIGN KEY (course_id) REFERENCES courses(course_id))

</code></pre>
<p><strong>Visual relationship:</strong></p>
<p><img src="https://res.cloudinary.com/dretwg3dy/image/upload/v1764427379/207_xje9pv.png" alt="img2"></p>
<p>Alice (student_id: 1001) is enrolled in:
‚Üí CS101 (via enrollment_id 1)
‚Üí MATH200 (via enrollment_id 2)</p>
<p>CS101 has these students:
‚Üí Alice (student_id: 1001)
‚Üí Bob (student_id: 1002)</p>
<hr>
<h3><strong>üéÆ Interactive Comparison Game</strong></h3>
<p><strong>Match the key type to its role:</strong></p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Primary Key or Foreign Key?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Social Security Number in PEOPLE table</td>
<td>?</td>
</tr>
<tr>
<td>Customer ID in ORDERS table referencing CUSTOMERS</td>
<td>?</td>
</tr>
<tr>
<td>Order ID in ORDERS table</td>
<td>?</td>
</tr>
<tr>
<td>Product ID in ORDER_ITEMS table referencing PRODUCTS</td>
<td>?</td>
</tr>
</tbody>
</table>
<p><strong>Think about each one...</strong></p>
<p><strong>Answers:</strong></p>
<ol>
<li><strong>Primary Key</strong> - Uniquely identifies each person</li>
<li><strong>Foreign Key</strong> - Links order to a customer</li>
<li><strong>Primary Key</strong> - Uniquely identifies each order</li>
<li><strong>Foreign Key</strong> - Links order item to a product</li>
</ol>
<hr>
<h3><strong>üõ°Ô∏è Foreign Key Constraints: Protecting Data Integrity</strong></h3>
<p><strong>What Foreign Keys Prevent:</strong></p>
<p>Scenario 1: Orphaned Records</p>
<p>Try to insert enrollment for non-existent student</p>
<pre><code class="language-sql"> INSERT INTO enrollments (student_id, course_id) VALUES (9999, 'CS101');

</code></pre>
<p>-- Student 9999 doesn't exist!-- Result: ‚ùå ERROR: Foreign key constraint violated!-- Database says: &quot;Can't enroll a student that doesn't exist!</p>
<p>Scenario 2: Broken References
-- Try to delete a student who has enrollments</p>
<pre><code class="language-sql">
DELETE FROM students WHERE student_id = 1001;
</code></pre>
<p>-- Result: ‚ùå ERROR: Foreign key constraint violated</p>
<p>-- Database says: &quot;Can't delete student with existing enrollments!&quot;</p>
<p>-- (You'd have orphaned enrollments pointing to non-existent student)Options for handling deletions:</p>
<p>-- CASCADE: Delete enrollments when student is deleted</p>
<p>FOREIGN KEY (student_id)
REFERENCES students(student_id) ON DELETE CASCADE
SET NULL: Set student_id to NULL in enrollments
FOREIGN KEY (student_id) REFERENCES students(student_id)
ON DELETE SET NULL;
-- RESTRICT: Prevent deletion (default)
FOREIGN KEY (student_id) REFERENCES students(student_id)  ON DELETE RESTRICT;</p>
<p><strong>Mental model:</strong> Foreign keys are like safety ropes in mountain climbing. They ensure you can't fall off a cliff (create invalid references) and keep everything connected safely!</p>
<hr>
<h3><strong>üìä Complete Example: E-Commerce Database</strong></h3>
<p>CUSTOMERS table</p>
<pre><code class="language-sql">CREATE TABLE customers (  customer_id INT PRIMARY KEY,   name VARCHAR(100),  email VARCHAR(100),  address VARCHAR(255));

</code></pre>
<p>ORDERS table</p>
<pre><code class="language-sql"> CREATE TABLE orders (  order_id INT PRIMARY KEY,         customer_id INT,  order_date DATE,  total_amount DECIMAL, FOREIGN KEY (customer_id) REFERENCES customers(customer_id));
</code></pre>
<p>ORDER_ITEMS table</p>
<pre><code class="language-sql">CREATE TABLE order_items (  item_id INT PRIMARY KEY,    order_id INT,  orders  product_id INT,
products  quantity INT,  price DECIMAL,   FOREIGN KEY (order_id) REFERENCES orders(order_id),  FOREIGN KEY (product_id) REFERENCES products(product_id));
</code></pre>
<p>PRODUCTS table</p>
<pre><code class="language-sql">
CREATE TABLE products (  product_id INT PRIMARY KEY,   name VARCHAR(200),  description TEXT,  price DECIMAL,  stock INT);

</code></pre>
<p><strong>The relationships:</strong></p>
<p><img src="https://res.cloudinary.com/dretwg3dy/image/upload/v1764427379/206_ebbar7.png" alt="img3"></p>
<hr>
<h3><strong>üí° Quick Comparison Summary</strong></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Primary Key</th>
<th>Foreign Key</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Purpose</strong></td>
<td>Uniquely identify rows</td>
<td>Link to other tables</td>
</tr>
<tr>
<td><strong>Uniqueness</strong></td>
<td>Must be unique</td>
<td>Can have duplicates</td>
</tr>
<tr>
<td><strong>Null Values</strong></td>
<td>Cannot be NULL</td>
<td>Can be NULL (optional relationship)</td>
</tr>
<tr>
<td><strong>Quantity</strong></td>
<td>One per table</td>
<td>Multiple per table</td>
</tr>
<tr>
<td><strong>Auto-Indexed</strong></td>
<td>Yes, always</td>
<td>Should be indexed</td>
</tr>
<tr>
<td><strong>Example</strong></td>
<td>Student ID</td>
<td>Student ID in Enrollments table</td>
</tr>
</tbody>
</table>
<p><strong>Mental model:</strong></p>
<ul>
<li><strong>Primary Key</strong> = Your name on your ID badge</li>
<li><strong>Foreign Key</strong> = Your name on your visitor's guest list (referencing you)</li>
</ul>
<hr>
</body>
    </html>