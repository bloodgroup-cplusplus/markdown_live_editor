
    <html>
      <head><meta charset="UTF-8"><title>Markdown Preview</title></head>
      <body><h2><strong>32: What is Caching? - Your Speed Multiplier</strong></h2>
<h3><strong>ğŸ¯ Challenge 1: The Library Puzzle</strong></h3>
<p><strong>Scenario:</strong> You're a librarian. A student asks for &quot;Harry Potter and the Sorcerer's Stone&quot; - a book requested 20 times per day.</p>
<p><strong>Method A: The Thorough Approach</strong></p>
<ul>
<li>Walk to back storage room (5 minutes)</li>
<li>Search through shelves (3 minutes)</li>
<li>Retrieve book (2 minutes)</li>
<li>Walk back to front desk (5 minutes)</li>
<li>Total: 15 minutes per request</li>
<li>Daily time: 15 min Ã— 20 requests = <strong>300 minutes (5 hours!)</strong></li>
</ul>
<p><strong>Method B: The Smart Approach</strong></p>
<ul>
<li>Keep a copy of popular books at the front desk</li>
<li>Student asks â†’ grab from desk (10 seconds!)</li>
<li>Total: 10 seconds per request</li>
<li>Daily time: 10 sec Ã— 20 requests = <strong>200 seconds (3 minutes!)</strong></li>
</ul>
<p><strong>Question:</strong> Which method serves students better? How much time do you save?</p>
<p><strong>Answer:</strong> Method B saves 297 minutes (almost 5 hours!) daily - that's <strong>99.97% faster!</strong></p>
<h3><strong>The Answer: This is Caching!</strong></h3>
<p><strong>Definition:</strong> Caching stores frequently accessed data in a fast, nearby location so you don't have to retrieve it from the slow, distant source every time.</p>
<hr>
<h3><strong>ğŸ§  The Memory Hierarchy: Why Caching Exists</strong></h3>
<p><strong>Your computer has different storage speeds:</strong></p>
<p><img src="https://res.cloudinary.com/dretwg3dy/image/upload/v1764489179/217_raogsx.png" alt="img1"></p>
<p>**Speed comparison in human terms (**all theoretical comparisons only)</p>
<p>If accessing RAM takes 1 second: ()</p>
<ul>
<li>L1 Cache: 0.02 seconds (blink of an eye)</li>
<li>SSD: 16 minutes (theoretically)</li>
<li>HDD: 1.5 days</li>
<li>Network: 1+ weeks</li>
</ul>
<p><strong>Key insight:</strong> Caching moves data from slow storage to fast storage!</p>
<hr>
<h3><strong>ğŸª Real-World Caching Analogy: The Grocery Store</strong></h3>
<p><strong>Without Cache (Always go to the warehouse):</strong></p>
<p>You need milk:
1. You drive to warehouse (30 min) ğŸš—
2. You search for milk (10 min) ğŸ”
3. You drive back  home (30 min) ğŸš—
Total: 70 minutes</p>
<p>You need bread:
1. You drive to warehouse again (30 min) ğŸš—
2. You search for bread (10 min) ğŸ”
3.  You drive back home (30 min) ğŸš—
Total: 70 minutes</p>
<p>Daily time for 5 items: 350 minutes! ğŸ˜°</p>
<p><strong>With Cache (Local grocery store):</strong></p>
<p>You need milk:
1. You walk to corner store (2 min) ğŸš¶
2. You grab the  milk (1 min) ğŸ¥›
3. You walk back  home (2 min) ğŸš¶
Total: 5 minutes</p>
<p>You need bread:
1. You walk to corner store (2 min) ğŸš¶
2. You grab the  bread (1 min) ğŸ
3. You walk back  home (2 min) ğŸš¶
Total: 5 minutes</p>
<p>Daily time for 5 items: 25 minutes! âš¡</p>
<p><strong>Mental model:</strong> The corner store is your cache - it stocks popular items locally for quick access. The warehouse is your database - it has everything but it's far away!</p>
<hr>
<h3><strong>ğŸ’» Caching in Web Applications</strong></h3>
<p><strong><img src="https://res.cloudinary.com/dretwg3dy/image/upload/v1764489178/216_o9zu73.png" alt="img2"></strong></p>
<hr>
<h3><strong>ğŸª Types of Caching: Where Data Gets Stored</strong></h3>
<p><strong>1. Browser Cache</strong></p>
<p><strong>Location</strong>: It is located in our computer
<strong>Stores</strong>:  It basically stores images, CSS, JavaScript, HTML
<strong>Speed</strong>: Instant (already on your device)
<strong>Example</strong>: Facebook logo doesn't re-download every page load</p>
<p><strong>2. CDN Cache</strong></p>
<p><strong>Location:</strong> It is located at  edge servers worldwide across different locations around the world
<strong>Stores</strong>: It generally stores static content (images, videos, files)
<strong>Speed</strong>:  It is very fast (geographically close)
<strong>Example</strong>: Netflix videos served from nearby servers</p>
<p><strong>3. Server Cache</strong></p>
<p><strong>Location</strong>: It is a web server memory (Redis, Memcached)
<strong>Stores</strong>: It generally stores database query results, session data, computed values
<strong>Speed:</strong> Fast (in-memory)
<strong>Example</strong>: User profile data, product listings</p>
<p><strong>4. Database Cache</strong></p>
<p><strong>Location</strong>: It is located at the database memory
<strong>Stores</strong>: It queries  results, frequently accessed rows
<strong>Speed</strong>: Fast (avoids disk I/O)
<strong>Example</strong>: Most-read blog posts</p>
<p><strong>5. Application Cache</strong></p>
<p><strong>Location</strong>: Application memory
<strong>Stores</strong>: Object instances, computed results
<strong>Speed</strong>: Very fast (in-process)
<strong>Example</strong>: Configuration settings, lookup tables</p>
<hr>
<h3><strong>ğŸ® Interactive Exercise: What Should You Cache?</strong></h3>
<p><strong>Decide if each scenario should use caching:</strong></p>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Cache It?</th>
<th>Why?</th>
</tr>
</thead>
<tbody>
<tr>
<td>User's account balance in banking app</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Product catalog with 10,000 items</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Weather forecast for a city</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>Live stock prices</td>
<td>?</td>
<td>?</td>
</tr>
<tr>
<td>User's profile picture</td>
<td>?</td>
<td>?</td>
</tr>
</tbody>
</table>
<p><strong>Think about each one...</strong></p>
<hr>
<p><strong>Answers:</strong></p>
<ol>
<li>
<p><strong>Account Balance: âŒ NO</strong> (or very short TTL (time to live))</p>
<ul>
<li>Account Balances changes frequently</li>
<li>It must always be accurate</li>
<li>Cache for 1-2 seconds max if needed</li>
<li><strong>Mental model:</strong> Money must be precise!</li>
</ul>
</li>
<li>
<p><strong>Product Catalog: âœ… YES</strong></p>
<ul>
<li>A product catalog changes infrequently</li>
<li>It is read far more than written</li>
<li>We can cache it  for 5-60 minutes</li>
<li><strong>Mental model:</strong> Products don't change every second</li>
</ul>
</li>
<li>
<p><strong>Weather Forecast: âœ… YES</strong></p>
<ul>
<li>Weather forecast updates every 30-60 minutes</li>
<li>It is usually the same data for all users in city</li>
<li>Cache for 30 minutes</li>
<li><strong>Mental model:</strong> Weather doesn't change instantly</li>
</ul>
</li>
<li>
<p><strong>Live Stock Prices: âŒ NO</strong> (or 1-second cache)</p>
<ul>
<li>Stock prices changes every millisecond</li>
<li>Users expect real-time prices to carry out high frequency trade</li>
<li>Maybe 1-second cache for high traffic</li>
<li><strong>Mental model:</strong> &quot;Live&quot; means fresh!</li>
</ul>
</li>
<li>
<p><strong>Profile Picture: âœ… YES</strong></p>
<ul>
<li>Rarely changes</li>
<li>Same for all viewers</li>
<li>Cache for 24 hours or longer</li>
<li><strong>Mental model:</strong> People don't change photos often</li>
</ul>
</li>
</ol>
<hr>
<h3><strong>ğŸ“‹ The Caching Decision Framework</strong></h3>
<p><strong>Cache when data is:</strong></p>
<ul>
<li>âœ… Read frequently (high traffic)</li>
<li>âœ… Expensive to generate (complex queries)</li>
<li>âœ… Relatively stable (doesn't change often)</li>
<li>âœ… Identical for multiple users</li>
<li>âœ… Acceptable if slightly stale</li>
</ul>
<p><strong>Don't cache when data is:</strong></p>
<ul>
<li>âŒ Written more than read</li>
<li>âŒ Must be 100% fresh (financial transactions)</li>
<li>âŒ User-specific and rarely reused</li>
<li>âŒ Cheap to generate</li>
<li>âŒ Privacy-sensitive</li>
</ul>
<p><strong>The Golden Rule:</strong></p>
<p>Cache value = <strong>(Access frequency Ã— Generation cost) / Freshness requirement</strong></p>
<p>If Cache value &gt; Threshold â†’ Cache it!</p>
<hr>
<h3><strong>ğŸ’¡ Simple Caching Example</strong></h3>
<p>Without Cache:
// Every request hits database</p>
<pre><code class="language-javascript">app.get('/products', async (req, res) =&gt; {

  // Query takes 100ms
  const products = await db.query('SELECT \* FROM products');

  res.json(products);}

// 100 requests = 100 database queries = 10 seconds total

// With Cache:
 const cache = {}
 app.get('/products', async (req, res) =&gt; {

  // Check cache first

  if (cache['products']) {

    // Cache hit! Return immediately (1ms)

         return res.json(cache['products'])
  }

  // Cache miss - query database

  const products = await db.query('SELECT * FROM products');
  // Store in cache for future requests/

  cache['products'] = products;

  res.json(products);

  // 100 requests = 1 database query + 99 cache hits = 0.2 seconds! âš¡ 50x  faster



---
</code></pre>
<h3><strong>ğŸš¨ Common Caching Mistakes</strong></h3>
<p>| âŒ Mistake 1: Caching Everything</p>
<p>// BAD: Cache user's shopping cart</p>
<pre><code class="language-javascript">cache.set(`cart:${userId}`, cart);
</code></pre>
<p>// Changes every second</p>
<p>// BAD: Cache current time</p>
<pre><code class="language-javascript">
cache.set('current_time', new Date());
</code></pre>
<p>// Always stale</p>
<p>// Mental model: Don't cache what changes constantly !âŒ Mistake</p>
<p>2: Never Expiring Cache</p>
<p>// BAD: Cache forever</p>
<pre><code class="language-javascript">cache.set('products', data);
</code></pre>
<p>// What if product prices change?</p>
<p>// GOOD: Set expiration (TTL - Time To Live)</p>
<pre><code class="language-javascript">
cache.set('products', data, { ttl: 300 });  // 5 minutes âŒ

</code></pre>
<p>Mistake 3: Cache Stampede</p>
<p>PROBLEM: Cache expires, 1000 requests hit database simultaneously</p>
<p>// All 1000 requests see cache miss</p>
<p>All 1000 query database at once</p>
<p>// Database overload! ğŸ’¥</p>
<p>// SOLUTION: Use locking or cache warming</p>
</body>
    </html>